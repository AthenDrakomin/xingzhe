import{j as e,B as f}from"./index-CRUGRQFH.js";import{r as i}from"./vendor-KfUPlHYY.js";var d=(t=>(t.USER="user",t.MODEL="model",t))(d||{});const g=({message:t})=>{const a=t.role===d.USER,[l,m]=i.useState(a?t.text:"");return i.useEffect(()=>{if(a||l===t.text)return;const o=t.text.length>100?15:30,n=setInterval(()=>{m(x=>x.length>=t.text.length?(clearInterval(n),t.text):t.text.slice(0,x.length+1))},o);return()=>clearInterval(n)},[t.text,a]),e.jsx("div",{className:`flex w-full mb-8 ${a?"justify-end":"justify-start"} animate-fade-in-up`,children:e.jsxs("div",{className:`max-w-[90%] md:max-w-[70%] flex flex-col ${a?"items-end":"items-start"}`,children:[e.jsx("span",{className:"text-[8px] md:text-[9px] uppercase tracking-widest text-slate-600 mb-2 opacity-80",children:a?"You":"The Monk"}),e.jsxs("div",{className:`
            relative p-4 md:p-6 rounded-sm leading-relaxed text-base md:text-lg serif min-w-[60px] backdrop-blur-sm transition-all duration-300
            ${a?"bg-gradient-to-br from-slate-800/80 to-slate-900/80 text-slate-200 border border-white/10 shadow-[0_4px_20px_-5px_rgba(0,0,0,0.5)]":"bg-black/40 text-slate-300 border border-white/5 shadow-none"}
          `,children:[l.split(`
`).map((o,n)=>e.jsx("p",{className:"mb-2 last:mb-0 min-h-[1.5em] drop-shadow-sm font-light",children:o},n)),!a&&l.length<t.text.length&&e.jsx("span",{className:"inline-block w-1.5 h-4 ml-1 align-middle bg-slate-600 animate-pulse"}),e.jsx("div",{className:`absolute w-1.5 h-1.5 opacity-50 ${a?"bottom-0 right-0 border-b border-r border-slate-400":"top-0 left-0 border-t border-l border-slate-500"}`})]}),e.jsx("span",{className:"text-[8px] md:text-[9px] text-slate-700 mt-1 font-mono opacity-50",children:t.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})})},b="施主，你我皆是这红尘中的迷途者。这里是「同病相怜」的回音壁，且留下一言，看看空谷有何回响。",v=()=>{const[t,a]=i.useState({messages:[],isLoading:!1,error:null}),[l,m]=i.useState(""),o=i.useRef(null);i.useEffect(()=>{const s=setTimeout(()=>{a(c=>({...c,messages:[{id:"init-1",role:d.MODEL,text:b,timestamp:new Date}]}))},500);return()=>clearTimeout(s)},[]),i.useEffect(()=>{var s;(s=o.current)==null||s.scrollIntoView({behavior:"smooth"})},[t.messages]);const n=()=>{if(!l.trim()||t.isLoading)return;const s=l.trim();if(s.length>1e3){a(r=>({...r,error:"消息太长了，请保持在1000字符以内。"}));return}if(s.length<1){a(r=>({...r,error:"请输入一些内容再发送。"}));return}m("");const c={id:Date.now().toString(),role:d.USER,text:s,timestamp:new Date};a(r=>({...r,messages:[...r.messages,c],isLoading:!0,error:null})),setTimeout(()=>{const r=["施主所言甚是，在这浮躁世间，能有如此觉悟实属难得。","心中有佛，何处不是净土；眼中有尘，何地不是娑婆。","人生如梦，何必执着于梦境中的得失？","烦恼即菩提，痛苦亦是觉悟的契机。","施主既知无常，便已踏上解脱之道。","放下执念，方能见性成佛。","一切有为法，如梦幻泡影，如露亦如电。","心若不动，风又奈何；你若不伤，岁月无恙。","苦海无边，回头是岸。施主可知此岸彼岸皆在一心？","众生皆具佛性，只因妄想执着而不能证得。","色即是空，空即是色，施主可曾参透此理？","一花一世界，一叶一菩提。万物皆有其存在的意义。","佛法在世间，不离世间觉；离世求菩提，恰如觅兔角。","施主今日所问，正是修行路上必经之关卡。","心如工画师，能画诸五阴，一切世间中，无法而不造。","菩提本无树，明镜亦非台；本来无一物，何处惹尘埃？","施主慧根深厚，假以时日必有所成。","佛法无边，慈悲为怀，愿施主能在红尘中保持初心。","知足常乐，宁静致远。此乃处世之大道也。","世间万物皆为虚妄，唯有内心的平静才是真实的归宿。"],u=r[Math.floor(Math.random()*r.length)],h={id:(Date.now()+1).toString(),role:d.MODEL,text:u,timestamp:new Date};a(p=>({...p,messages:[...p.messages,h],isLoading:!1}))},1e3)},x=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),n())};return e.jsxs("div",{className:"flex flex-col h-full relative bg-[#020617]",style:{backgroundColor:"#020617"},children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:e.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 pb-32 pt-8",children:[e.jsxs("div",{className:"text-center py-6 sm:py-8 mb-4 border-b border-white/5",children:[e.jsx("h2",{className:"serif text-xl text-slate-300 tracking-wider",children:"同病相怜 • 动态"}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-2 tracking-[0.3em] uppercase",children:"Echoes in the Void"})]}),t.messages.map(s=>e.jsx(g,{message:s},s.id)),t.isLoading&&e.jsxs("div",{className:"flex items-center space-x-2 text-slate-600 text-sm animate-pulse pl-4 opacity-50",children:[e.jsx("div",{className:"w-1 h-1 bg-slate-500 rounded-full"}),e.jsx("div",{className:"w-1 h-1 bg-slate-500 rounded-full animation-delay-200"}),e.jsx("div",{className:"w-1 h-1 bg-slate-500 rounded-full animation-delay-400"})]}),t.error&&e.jsx("div",{className:"text-center py-4 text-red-900/50 text-xs tracking-widest",role:"alert","aria-live":"polite",children:t.error}),e.jsx("div",{ref:o})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-gradient-to-t from-black via-black/90 to-transparent pb-4 sm:pb-6 pt-6 sm:pt-8 px-4 z-20",children:e.jsxs("div",{className:"max-w-2xl mx-auto flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsx("input",{type:"text",value:l,onChange:s=>m(s.target.value),onKeyDown:x,placeholder:"写下你的感悟...",className:"flex-1 bg-white/[0.03] border border-white/10 rounded-sm px-3 py-2 sm:px-4 sm:py-3 text-slate-300 focus:outline-none focus:border-white/20 focus:bg-white/[0.05] transition-all placeholder-slate-700 text-sm font-light tracking-wide shadow-inner min-h-[40px] sm:min-h-[48px]","aria-label":"输入消息"}),e.jsx(f,{variant:"ghost",size:"md",onClick:n,disabled:!l.trim()||t.isLoading,"aria-label":"发送消息",className:"px-4 py-2 sm:px-6 sm:py-3",children:"Send"})]})})]})};export{v as default};
